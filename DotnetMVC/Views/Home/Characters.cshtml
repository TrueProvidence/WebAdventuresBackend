@model DotnetMVC.Models.CharacterCampaignViewModel

@{
    ViewData["Title"] = "Characters[WIP]";
}
<h1>@ViewData["Title"]</h1>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Character Select</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
    <div class="container py-4">
        
        <div class="row">
            <!-- Sidebar with character list and filter form -->
            <div class="col-md-3">
                <div class="d-flex flex-column gap-3">
                    <div class="btn-group">
                        <a href="#save" class="btn btn-outline-primary w-100">SAVE & EXIT</a>
                        <a asp-action="Campaigns" class="btn btn-outline-secondary w-100">Campaigns</a>
                    </div>

                    <a class="btn btn-primary w-100" asp-controller="Characters" asp-action="Create">Create New</a>

                    <!-- Filter Form -->
                    <form asp-controller="Characters" asp-action="Index" method="get" class="mb-3">
                        <div class="mb-3">
                            <label for="campaignFilter" class="form-label">Filter by Campaign:</label>
                            <select id="campaignFilter" name="CharacterCampaign" class="form-select" asp-items="Model.Campaigns">
                                <option value="">All Campaigns</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="nameSearch" class="form-label">Search by Name:</label>
                            <input type="text" id="nameSearch" name="SearchString" class="form-control" placeholder="Character Name" value="@Model.SearchString">
                        </div>
                        <button type="submit" class="btn btn-secondary w-100">Filter</button>
                    </form>

                    <!-- List of Characters (Table) -->
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Campaign</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var character in Model.Characters!)
                            {
                                <tr onclick="showCharacterDetails('@character.Name', '@character.Campaign', @character.Health, @character.Currency, '@character.Items')">
                                    <td>@character.Name</td>
                                    <td>@character.Campaign</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Character Detail Section -->
            <div class="col-md-9">
                <div class="border p-3" id="characterDetails">
                    <h4>Character Name: <span id="characterName">-</span></h4>
                    <h5>Current Campaign: <span id="characterCampaign">-</span></h5>
                    
                    <div class="row mt-4">
                        <div class="col-md-4">
                            <div class="border p-3 text-center">
                                <img src="https://placehold.co/150x150" class="rounded mb-3" alt="Character Image">
                                <h6>Stats</h6>
                                <p>Health: <span id="characterHealth">-</span></p>
                                <p>Currency: <span id="characterCurrency">-</span></p>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="border p-3">
                                <h6>Character Sheet</h6>
                                <p>Item List: <span id="characterItems">-</span></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <script>
        function showCharacterDetails(name, campaign, health, currency, items) {
            name = name || "N/A";
            campaign = campaign || "N/A";
            health = health || 0;
            currency = currency || 0;
            items = items || "None";
        }
    </script>
</body>